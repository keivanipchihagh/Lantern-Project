{% load static %}

<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.6.14/dist/css/uikit.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.6.14/dist/js/uikit.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.6.14/dist/js/uikit-icons.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <link href="{% static 'api/styles/style.css' %}" type="text/css" rel="stylesheet" />
</head>

<body>

    <div id="app" class="app">

        <div class="app-container uk-margin-small-bottom">
            <div class="app-header uk-width-1-1 h-30">
                <div class="app-header-container " style="background-image:url({% static 'api/images/background.png' %}">
                    <h4>Hello There!<br/></h4><span>Ask us anything, or share your feedback.</span>
                </div>                
            </div>

            <div class="app-body uk-width-1-1 h-63">

                <div class="body-nav">
                    <div class="nav-item">
                        {% comment %} <span uk-icon="happy" class="nav-icon"></span> {% endcomment %}
                        Virtual Agent
                    </div>
                    <div class="nav-item">
                        <span uk-icon="happy" class="nav-icon"></span>
                        Start a Conversation
                    </div>
                    <div class="nav-item">
                        {% comment %} <span uk-icon="pencil" class="nav-icon"></span> {% endcomment %}
                        Submit a Ticket
                    </div>
                    <div class="nav-item">
                        {% comment %} <span uk-icon="comments" class="nav-icon"></span> {% endcomment %}
                        “Share your Feedback”
                        <span class="uk-text-meta">Drop us a few lines regarding our website.</span>
                    </div>
                </div>

            </div>

            <div class="app-footer uk-width-1-1 uk-text-center">
                <span class="uk-text-meta app-footer-text">We run on <a href="#" target="_blank">Lantern</a></span>
            </div>
        </div>

        <div class="app-toggler" @click="toggleApp">
            <img class="app-toggler-logo" src="{% static 'api/images/logo.png' %}" />
            <div class="app-toggler-spinner" style="display: none;"><div class="spinner-ring"><div></div><div><div></div></div></div></div>
            <span class="app-toggler-icon" uk-icon="icon: chevron-down; ratio: 1.5"></span>
        </div>        
    </div>

    {% comment %} <div id="app" class="app" v-bind:class="{'uk-app-dark': isDark, 'uk-app-light': !isDark, 'app-hide': !showApp}">

        <!-- Head - start -->
        <div class="head">
            <!-- Logo - start -->
            <div class="app-logo" v-on:mouseover="toggleHeader">
                <img src="{% static 'api/images/logo.png' %}" />
            </div>
            <span id="dot_1" class="uk-etc-dot uk-etc-dot-hide" style="left: -13px">•</span>
            <span id="dot_2" class="uk-etc-dot uk-etc-dot-hide" style="left: -5px">•</span>
            <span id="dot_3" class="uk-etc-dot uk-etc-dot-hide" style="left: 3px">•</span>
            <!-- Logo - end -->
            <!-- Header - start -->
            <div id="app-header" class="uk-width-auto app-header" v-bind:class="{'app-header-expand': expandHeader}">
                <div id="app-header-content" class="app-header-container">
                    <span class="app-title">Live Support</span>
                    <ul class="uk-iconnav uk-margin-small-right uk-float-right">
                        <li v-bind:class="{'app-icon-hide': !expandApp}">
                            <a class="app-cursor-pointer app-icon" uk-icon="icon: settings" v-bind:class="{'uk-icon-light': isDark}"></a>

                            <!-- Settings - start -->
                            <div class="app-dropdown" uk-dropdown="pos: bottom-center; animation: uk-animation-slide-top-small; duration: 200">
                                <div class=".uk-container-xsmall">
                                    <span class="app-dropdown-desc">Theme</span>
                                    <ul class="uk-subnav uk-subnav-pill app-cursor-pointer">
                                        <li v-bind:class="{'uk-active': !isDark}"><a class="app-dropdown-li-radius-left" v-on:click="changeTheme">Light</a></li>
                                        <li v-bind:class="{'uk-active': isDark}"><a class="app-dropdown-li-radius-right" v-on:click="changeTheme">Dark</a></li>
                                    </ul>
                                </div>
                            </div>
                            <!-- Settings - end -->
                        </li>
                        <li><a id="toggler" class="app-cursor-pointer app-icon" uk-icon="icon: chevron-up" v-bind:class="{'uk-icon-light': isDark}" v-on:click="toggleApp"></a></li>
                        <li><a class="app-cursor-pointer app-icon" uk-icon="icon: close" v-on:click="closeApp" v-bind:class="{'uk-icon-light': isDark}"></a></li>
                    </ul>
                </div>
            </div>
            <!-- Header - end -->            
        </div>
        <!-- Head - end -->
        <!-- Content - start -->
        <div id="app-content" class="app-content" v-bind:class="{'app-content-show': expandApp}">

            <!-- Body - start -->
            <div id="app-body" class="uk-card-body uk-padding-small app-body">

                <div id="chat-log" is="Message" v-for="message in messages" v-bind:key="message.id" v-bind:_sender="message.sender" v-bind:message="message.message" v-bind:datetime="message.datetime" v-bind:id="message.id" v-if="ready & expandApp"></div>

            </div>
            <!-- Body - end -->
            <!-- Footer - start -->
            <div class="uk-card-footer uk-padding-remove uk-stick-bottom app-footer" v-show="ready & expandApp">

                <div class="uk-grid-small uk-flex-middle uk-margin-small" uk-grid>
                    <div class="uk-width-expand">
                        <textarea id="chat-message-input" class="uk-textarea uk-padding-remove uk-border-remove" rows="2" maxlength="300" placeholder="Send a message..." v-on:keyup.enter="sendMessage" v-model="message" v-bind:class="{'uk-font-light': isDark}"></textarea>
                    </div>
                    <div class="uk-width-auto">
                        <ul class="uk-iconnav uk-margin-small-right">
                            <li><a class="app-cursor-pointer app-icon" uk-icon="icon: happy" v-bind:class="{'uk-icon-light': isDark}"></a></li>
                            <li v-show="emptyMessage"><a class="app-cursor-pointer app-icon" uk-icon="icon: image" v-bind:class="{'uk-icon-light': isDark}"></a></li>                            
                            <li v-show="!emptyMessage"><a id="chat-message-submit" class="app-cursor-pointer app-icon" uk-icon="icon: forward" v-bind:class="{'uk-icon-light': isDark}"></a></li>                            
                        </ul>
                    </div>
                </div>                                           
            </div>
            <!-- Footer - end -->
        </div>        
        <!-- Content - end -->
    </div> {% endcomment %}

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="{% static 'api/scripts/script.js' %}"></script>
</body>
</html>